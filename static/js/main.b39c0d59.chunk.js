(this.webpackJsonpticket=this.webpackJsonpticket||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(10),i=n.n(r),s=(n(107),n(108),n(33)),o=n(11),l=n(2);function j(){return Object(l.jsx)("h1",{children:"404 simple as that 404"})}var d=n(14),u=n(89),h=n.n(u).a.connect("https://my-ticket-api-dev.herokuapp.com");function b(e){return Object(l.jsx)("h1",{children:e.ticket.error?e.ticket.error:"Invalid Ticket"})}function m(e){var t=e.ticket,n=t.title,a=t.description,c=t.price,r=t.qr;return Object(l.jsxs)("div",{children:[Object(l.jsx)("table",{children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:"Title:"})}),Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:n})})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:"Description:"})}),Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:a})})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:"Price:"})}),Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:c})})]})]})}),Object(l.jsx)("img",{src:r,alt:"Claim QR Code"})]})}function p(e){var t=c.a.useState({}),n=Object(d.a)(t,2),r=n[0],i=n[1],s=c.a.useState(!0),j=Object(d.a)(s,2),u=j[0],p=j[1],O=Object(o.g)().id,g=Object(o.f)();return Object(a.useEffect)((function(){var e=window.localStorage.getItem("token");return void 0!==O&&window.localStorage.setItem("ticket",O),null===e?(console.log("redirected to login from ticket"),void g.push("/login")):(e&&O&&h.emit("join",{ticket:O,token:e}),h.disconnected&&h.connect(),h.on("update ticket",(function(t){console.log("msg received"),h.emit("request",{ticket:O,token:e})})),h.on("ticket",(function(e){console.log("ticket received",e),e.error&&"Unauthorized Access!"===e.error&&(localStorage.removeItem("token"),g.push("/login")),i(e),p(!1)})),function(){h.emit("leave",O),h.off("ticket"),h.off("update ticket"),h.disconnect()})}),[O,g]),u?Object(l.jsx)("h1",{children:"Loading Ticket..."}):void 0===O||void 0!==r.error?Object(l.jsx)(b,{ticket:r}):Object(l.jsx)(m,{ticket:r})}function O(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Welcome to Ticket Application"}),Object(l.jsx)("h2",{children:"Please enter a shared ticket url"})]})}h.on("connection",console.log("connected IO"));var g=n(19),x=n(192),f=n(191),v=n(186),k=n(190),w=n(187),C=n(56),y=n.n(C),S=n(153),T=n(181),N=n(184),I=n(188),W=Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function D(e){var t=W(),n=Object(a.useState)(!1),c=Object(d.a)(n,2),r=c[0],i=c[1],j=Object(o.f)();return Object(l.jsxs)(N.a,{component:"main",maxWidth:"xs",children:[Object(l.jsx)(v.a,{}),r?Object(l.jsx)("h1",{children:"Loading"}):Object(l.jsxs)("div",{className:t.paper,children:[Object(l.jsx)(x.a,{className:t.avatar,children:Object(l.jsx)(y.a,{})}),Object(l.jsx)(S.a,{component:"h1",variant:"h5",children:"Login"}),Object(l.jsxs)("form",{className:t.form,noValidate:!0,method:"post",onSubmit:function(t){t.preventDefault(),i(!0),fetch("https://my-ticket-api-dev.herokuapp.com/login",{method:"POST",body:JSON.stringify({username:e.user.username,password:e.user.password}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(i(!1),e.token){window.localStorage.setItem("token",e.token),console.log("Token saved");var t=window.localStorage.getItem("ticket");t?j.push("/ticket/".concat(t)):j.push("/")}else window.alert(e.error)}))},children:[Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"username",name:"username",autoComplete:"username",value:e.user.username,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{username:t.target.value}))},autoFocus:!0}),Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:e.user.password,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{password:t.target.value}))}}),Object(l.jsx)(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Login"}),Object(l.jsx)(w.a,{container:!0,children:Object(l.jsx)(w.a,{item:!0,children:Object(l.jsx)(I.a,{component:s.b,to:"/register",children:"Don't have an account?"})})})]})]})]})}var P=Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function U(e){var t=P(),n=Object(a.useState)(!1),c=Object(d.a)(n,2),r=c[0],i=c[1],j=Object(o.f)(),u=e.user,h=u.name,b=u.username,m=u.password;return Object(l.jsxs)(N.a,{component:"main",maxWidth:"xs",children:[Object(l.jsx)(v.a,{}),r?Object(l.jsx)("h1",{children:"Loading"}):Object(l.jsxs)("div",{className:t.paper,children:[Object(l.jsx)(x.a,{className:t.avatar,children:Object(l.jsx)(y.a,{})}),Object(l.jsx)(S.a,{component:"h1",variant:"h5",children:"Register"}),Object(l.jsxs)("form",{className:t.form,noValidate:!0,method:"post",onSubmit:function(e){e.preventDefault(),i(!0),fetch("https://my-ticket-api-dev.herokuapp.com/register",{method:"POST",body:JSON.stringify({name:h,username:b,password:m}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){i(!1),e.message?j.push("/login"):window.alert(e.error)}))},children:[Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"name",name:"name",autoComplete:"name",value:h,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{name:t.target.value}))},autoFocus:!0}),Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"username",name:"username",autoComplete:"username",value:b,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{username:t.target.value}))},autoFocus:!0}),Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:m,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{password:t.target.value}))}}),Object(l.jsx)(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Register"}),Object(l.jsx)(w.a,{container:!0,children:Object(l.jsx)(w.a,{item:!0,children:Object(l.jsx)(I.a,{component:s.b,to:"/login",children:"Don't have an account?"})})})]})]})]})}function q(e){var t=Object(a.useState)(e.tab),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)({name:"",username:"",password:""}),s=Object(d.a)(i,2),o=s[0],j=s[1];return Object(a.useEffect)((function(){r(e.tab)}),[e.tab]),Object(l.jsx)("div",{children:"login"===c?Object(l.jsx)(D,{user:o,onUserChange:function(e){return j(e)}}):Object(l.jsx)(U,{user:o,onUserChange:function(e){return j(e)}})})}var F=n(91),L=n(189),A=Object(F.a)({palette:{type:"dark"}});var J=function(){return Object(l.jsx)(L.a,{theme:A,children:Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)(s.a,{basename:"ticket-application",children:Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{path:"/",exact:"true",children:Object(l.jsx)(O,{})}),Object(l.jsx)(o.a,{path:"/login",children:Object(l.jsx)(q,{tab:"login"})}),Object(l.jsx)(o.a,{path:"/register",children:Object(l.jsx)(q,{tab:"register"})}),Object(l.jsx)(o.a,{path:"/ticket/:id",children:Object(l.jsx)(p,{})}),Object(l.jsx)(o.a,{path:"*",children:Object(l.jsx)(j,{})})]})})})})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,193)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(J,{})}),document.getElementById("root")),E()}},[[150,1,2]]]);
//# sourceMappingURL=main.b39c0d59.chunk.js.map