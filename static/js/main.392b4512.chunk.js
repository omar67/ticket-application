(this.webpackJsonpticket=this.webpackJsonpticket||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),i=n.n(c),s=(n(100),n(101),n(30)),o=n(11),l=n(2);function j(){return Object(l.jsx)("h1",{children:"404 simple as that 404"})}var d=n(14),u=n(82),b=n.n(u).a.connect("https://my-ticket-api-dev.herokuapp.com");function h(e){return Object(l.jsx)("h1",{children:e.ticket.error?e.ticket.error:"Invalid Ticket"})}function m(e){var t=e.ticket,n=t.title,a=t.description,r=t.price,c=t.qr;return Object(l.jsxs)("div",{children:[Object(l.jsx)("table",{children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:"Title:"})}),Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:n})})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:"Description:"})}),Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:a})})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:"Price:"})}),Object(l.jsx)("td",{children:Object(l.jsx)("h1",{children:r})})]})]})}),Object(l.jsx)("img",{src:c,alt:"Claim QR Code"})]})}function O(e){var t=r.a.useState({}),n=Object(d.a)(t,2),c=n[0],i=n[1],s=r.a.useState(!0),j=Object(d.a)(s,2),u=j[0],O=j[1],p=Object(o.g)().id,g=Object(o.f)();return Object(a.useEffect)((function(){var e=window.localStorage.getItem("token");console.log("token: ",e),null===e&&(console.log("redirected to login from ticket"),g.push("/login")),void 0!==p&&(window.localStorage.setItem("ticket",p),b.emit("join",{ticket:p,token:e})),b.on("update ticket",(function(t){console.log("msg received",t),b.emit("request",{ticket:p,token:e})})),b.on("ticket",(function(e){console.log("ticket received",e),e.error&&"Unauthorized Access!"===e.error&&(localStorage.removeItem("token"),g.push("login")),i(e),O(!1)}))})),u?Object(l.jsx)("h1",{children:"Loading Ticket..."}):void 0===p||void 0!==c.error?Object(l.jsx)(h,{ticket:c}):Object(l.jsx)(m,{ticket:c})}function p(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Welcome to Ticket Application"}),Object(l.jsx)("h2",{children:"Please enter a shared ticket url"})]})}b.on("connection",console.log("connected IO"));var g=n(19),x=n(182),f=n(181),v=n(177),k=n(180),w=n(179),C=n(54),y=n.n(C),S=n(178),T=n(172),I=n(175),N=Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function W(e){var t=N(),n=Object(a.useState)(!1),r=Object(d.a)(n,2),c=r[0],i=r[1],j=Object(o.f)();return Object(l.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(l.jsx)(v.a,{}),c?Object(l.jsx)("h1",{children:"Loading"}):Object(l.jsxs)("div",{className:t.paper,children:[Object(l.jsx)(x.a,{className:t.avatar,children:Object(l.jsx)(y.a,{})}),Object(l.jsx)(S.a,{component:"h1",variant:"h5",children:"Login"}),Object(l.jsxs)("form",{className:t.form,noValidate:!0,method:"post",onSubmit:function(t){t.preventDefault(),i(!0),fetch("https://my-ticket-api-dev.herokuapp.com/login",{method:"POST",body:JSON.stringify({username:e.user.username,password:e.user.password}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(i(!1),e.token){window.localStorage.setItem("token",e.token);var t=window.localStorage.getItem("token");console.log("Token saved",t);var n=window.localStorage.getItem("ticket");n?j.push("/ticket/".concat(n)):j.push("/")}else window.alert(e.error)}))},children:[Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"username",name:"username",autoComplete:"username",value:e.user.username,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{username:t.target.value}))},autoFocus:!0}),Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:e.user.password,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{password:t.target.value}))}}),Object(l.jsx)(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Login"}),Object(l.jsx)(w.a,{container:!0,children:Object(l.jsx)(w.a,{item:!0,children:Object(l.jsx)(s.b,{to:"/register",variant:"body2",children:"Don't have an account?"})})})]})]})]})}var P=Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function U(e){var t=P(),n=Object(a.useState)(!1),r=Object(d.a)(n,2),c=r[0],i=r[1],j=Object(o.f)(),u=e.user,b=u.name,h=u.username,m=u.password;return Object(l.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(l.jsx)(v.a,{}),c?Object(l.jsx)("h1",{children:"Loading"}):Object(l.jsxs)("div",{className:t.paper,children:[Object(l.jsx)(x.a,{className:t.avatar,children:Object(l.jsx)(y.a,{})}),Object(l.jsx)(S.a,{component:"h1",variant:"h5",children:"Register"}),Object(l.jsxs)("form",{className:t.form,noValidate:!0,method:"post",onSubmit:function(e){e.preventDefault(),i(!0),fetch("https://my-ticket-api-dev.herokuapp.com/register",{method:"POST",body:JSON.stringify({name:b,username:h,password:m}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){i(!1),e.message?j.push("/login"):window.alert(e.error)}))},children:[Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"name",name:"name",autoComplete:"name",value:b,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{name:t.target.value}))},autoFocus:!0}),Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"username",name:"username",autoComplete:"username",value:h,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{username:t.target.value}))},autoFocus:!0}),Object(l.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:m,onChange:function(t){return e.onUserChange(Object(g.a)(Object(g.a)({},e.user),{},{password:t.target.value}))}}),Object(l.jsx)(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Register"}),Object(l.jsx)(w.a,{container:!0,children:Object(l.jsx)(w.a,{item:!0,children:Object(l.jsx)(s.b,{to:"/login",variant:"body2",children:"Already have an account?"})})})]})]})]})}function q(e){var t=Object(a.useState)(e.tab),n=Object(d.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({name:"",username:"",password:""}),s=Object(d.a)(i,2),o=s[0],j=s[1];return Object(a.useEffect)((function(){c(e.tab)}),[e.tab]),Object(l.jsx)("div",{children:"login"===r?Object(l.jsx)(W,{user:o,onUserChange:function(e){return j(e)}}):Object(l.jsx)(U,{user:o,onUserChange:function(e){return j(e)}})})}var D=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)(s.a,{children:Object(l.jsx)(s.a,{basename:"/ticket-application",children:Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{path:"/",exact:"true",children:Object(l.jsx)(p,{})}),Object(l.jsx)(o.a,{path:"/login",children:Object(l.jsx)(q,{tab:"login"})}),Object(l.jsx)(o.a,{path:"/register",children:Object(l.jsx)(q,{tab:"register"})}),Object(l.jsx)(o.a,{path:"/ticket/:id",children:Object(l.jsx)(O,{})}),Object(l.jsx)(o.a,{path:"*",children:Object(l.jsx)(j,{})})]})})})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,184)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(D,{})}),document.getElementById("root")),F()}},[[143,1,2]]]);
//# sourceMappingURL=main.392b4512.chunk.js.map